/*
SQLyog v10.2 
MySQL - 5.5.22 : Database - blog
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`blog` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `blog`;

/*Table structure for table `p_account` */

DROP TABLE IF EXISTS `p_account`;

CREATE TABLE `p_account` (
  `ACCOUNT_ID` int(11) NOT NULL AUTO_INCREMENT,
  `ACCOUNT_NO` varchar(32) DEFAULT NULL,
  `ACCOUNT_NAME` varchar(32) DEFAULT NULL,
  `ACCOUNT_PWD` varchar(32) DEFAULT NULL,
  `ACCOUNT_ROLE` varchar(8) DEFAULT NULL,
  `ACCOUNT_EMAIL` varchar(32) NOT NULL,
  `DATE_OPER_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ACCOUNT_PHONE` varchar(32) NOT NULL,
  `DATA_OPER_TYPE` varchar(8) DEFAULT 'I',
  PRIMARY KEY (`ACCOUNT_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

/*Data for the table `p_account` */

insert  into `p_account`(`ACCOUNT_ID`,`ACCOUNT_NO`,`ACCOUNT_NAME`,`ACCOUNT_PWD`,`ACCOUNT_ROLE`,`ACCOUNT_EMAIL`,`DATE_OPER_TIME`,`ACCOUNT_PHONE`,`DATA_OPER_TYPE`) values (1,'admin','管理员','3fed7a346e430ea4c2aa10250928f4de','1','308182648@qq.com','2018-01-10 18:19:48','12580','I');

/*Table structure for table `p_file_manage` */

DROP TABLE IF EXISTS `p_file_manage`;

CREATE TABLE `p_file_manage` (
  `FILE_ID` int(11) NOT NULL AUTO_INCREMENT,
  `NOTE_ID` int(11) DEFAULT NULL,
  `FILE_PATH` varchar(256) DEFAULT NULL,
  `FILE_NAME` varchar(256) DEFAULT NULL,
  `FILE_ORG_NAME` varchar(256) DEFAULT NULL,
  `FILE_SIZE` int(11) DEFAULT NULL,
  `UPLOAD_TIME` datetime DEFAULT NULL,
  `UPLOAD_PERSON` varchar(32) DEFAULT NULL,
  `FILE_EXT` varchar(32) DEFAULT NULL,
  `DATA_OPER_TYPE` varchar(8) NOT NULL DEFAULT 'I',
  `DATA_OPER_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`FILE_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `p_file_manage` */

/*Table structure for table `p_note_manage` */

DROP TABLE IF EXISTS `p_note_manage`;

CREATE TABLE `p_note_manage` (
  `NOTE_ID` int(11) NOT NULL AUTO_INCREMENT,
  `NOTE_TITLE` varchar(256) DEFAULT NULL,
  `NOTE_CONTAIN` mediumtext,
  `CREATE_TIME` datetime DEFAULT NULL,
  `CREATE_PERSON` varchar(32) DEFAULT NULL,
  `NOTE_TYPE` varchar(8) DEFAULT NULL,
  `NOTE_NO` varchar(32) DEFAULT NULL,
  `DATA_OPER_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `UPDATE_TIME` datetime DEFAULT NULL,
  `DATA_OPER_TYPE` varchar(8) NOT NULL DEFAULT 'I',
  PRIMARY KEY (`NOTE_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `p_note_manage` */

/*Table structure for table `p_note_type` */

DROP TABLE IF EXISTS `p_note_type`;

CREATE TABLE `p_note_type` (
  `TYPE_ID` int(11) NOT NULL AUTO_INCREMENT,
  `TYPE_NO` varchar(32) DEFAULT NULL,
  `TYPE_NAME` varchar(256) DEFAULT NULL,
  `P_TYPE_NO` varchar(32) DEFAULT NULL,
  `TOP_TYPE_NO` varchar(32) DEFAULT NULL,
  `CREATE_PERSON` varchar(32) DEFAULT 'admin',
  `CREATE_TIME` datetime DEFAULT NULL,
  `DATA_OPER_TYPE` varchar(8) DEFAULT 'I',
  `DATA_OPER_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`TYPE_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8;

/*Data for the table `p_note_type` */

insert  into `p_note_type`(`TYPE_ID`,`TYPE_NO`,`TYPE_NAME`,`P_TYPE_NO`,`TOP_TYPE_NO`,`CREATE_PERSON`,`CREATE_TIME`,`DATA_OPER_TYPE`,`DATA_OPER_TIME`) values (1,'001','java','000','000','admin','2018-02-08 14:45:51','I','2018-03-21 10:22:05'),(2,'002','python','000','000','admin','2018-02-08 14:45:51','I','2018-03-21 10:22:06'),(3,'003','html','000','000','admin','2018-02-08 14:45:51','I','2018-03-21 10:22:08'),(4,'004','javascript','000','000','admin','2018-02-08 14:45:51','I','2018-03-21 10:22:09'),(5,'005','css','000','000','admin','2018-02-08 14:45:51','I','2018-03-21 10:22:10'),(6,'001001','java1','001','000','admin','2018-02-08 14:48:15','I','2018-03-21 10:22:28'),(7,'001002','java2','001','000','admin','2018-02-08 14:49:52','I','2018-03-21 10:22:29'),(8,'001003','java3','001','000','admin','2018-02-08 14:50:08','I','2018-03-21 10:22:30'),(9,'002001','python1','002','000','admin','2018-02-08 14:50:08','I','2018-03-21 10:22:32'),(10,'002002','python2','002','000','admin','2018-02-08 14:50:08','I','2018-03-21 10:22:34'),(11,'002003','python3','002','000','admin','2018-02-08 14:50:08','I','2018-03-21 10:22:38'),(12,'003001','html1','003','000','admin','2018-02-08 14:50:08','I','2018-03-21 10:22:44'),(13,'003002','html2','003','000','admin','2018-02-08 14:50:08','I','2018-03-21 10:22:46'),(14,'003003','html3','003','000','admin','2018-02-08 14:50:08','I','2018-03-21 10:22:52'),(15,'000',NULL,NULL,NULL,'admin',NULL,'I','2018-03-21 10:22:26');

/*Table structure for table `p_server_config` */

DROP TABLE IF EXISTS `p_server_config`;

CREATE TABLE `p_server_config` (
  `ID` int(11) NOT NULL AUTO_INCREMENT COMMENT 'DFF',
  `SERVER_TYPE` varchar(32) DEFAULT NULL,
  `WS_PARAM_TYPE` varchar(32) DEFAULT NULL,
  `CLASS_PATH` varchar(128) DEFAULT NULL,
  `CLASS_FUNC` varchar(32) DEFAULT NULL,
  `CLASS_FUNC_DESC` varchar(128) DEFAULT NULL,
  `EXTEND1` varchar(32) DEFAULT NULL,
  `DATA_OPER_TYPE` varchar(8) DEFAULT 'I',
  `DATA_OPER_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=utf8;

/*Data for the table `p_server_config` */

insert  into `p_server_config`(`ID`,`SERVER_TYPE`,`WS_PARAM_TYPE`,`CLASS_PATH`,`CLASS_FUNC`,`CLASS_FUNC_DESC`,`EXTEND1`,`DATA_OPER_TYPE`,`DATA_OPER_TIME`) values (1,'cust','json',NULL,'getTest',NULL,'TEST-01','I','2018-01-15 15:25:19'),(2,'rpc','json','com.study.blog.loginAndRegister.service.ILoginAndRegisterService','getLogAccountInfo','获取登录人信息','LoginAndRegisterServiceImpl','I','2018-02-07 17:52:36'),(4,'cust','json','','getNoteTypes','获取类型树','TREE-001','I','2018-02-08 15:55:13');

/*Table structure for table `p_sql_config` */

DROP TABLE IF EXISTS `p_sql_config`;

CREATE TABLE `p_sql_config` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `SCENCE_CODE` varchar(128) DEFAULT NULL COMMENT '场景编码',
  `ELE_NO` varchar(32) DEFAULT NULL COMMENT '元素编码',
  `ELE_NAME` varchar(128) DEFAULT NULL COMMENT '元素名称',
  `SQL` text COMMENT 'sql',
  `PARAM_NAME` varchar(1024) DEFAULT NULL COMMENT '参数名',
  `SQL_TYPE` varchar(16) DEFAULT 'SELECT' COMMENT 'sql类型',
  `DATA_OPER_TYPE` varchar(16) DEFAULT 'I',
  `DATA_OPER_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;

/*Data for the table `p_sql_config` */

insert  into `p_sql_config`(`ID`,`SCENCE_CODE`,`ELE_NO`,`ELE_NAME`,`SQL`,`PARAM_NAME`,`SQL_TYPE`,`DATA_OPER_TYPE`,`DATA_OPER_TIME`) values (1,'TEST','TEST-01','测试一','select \'1\' name',NULL,'SELECT','I','2018-01-15 15:24:56'),(2,'TREE','TREE-001','获取类型树','SELECT * FROM p_note_type WHERE P_TYPE_NO = IFNULL(#{paramMap.typeCode,jdbcType=VARCHAR},\'00\')',NULL,'SELECT','I','2018-02-08 16:29:42');

/*Table structure for table `p_sql_error` */

DROP TABLE IF EXISTS `p_sql_error`;

CREATE TABLE `p_sql_error` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ERROR_MSG` text,
  `CREATE_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  KEY `ID` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `p_sql_error` */

/*Table structure for table `p_user_info` */

DROP TABLE IF EXISTS `p_user_info`;

CREATE TABLE `p_user_info` (
  `USER_ID` int(11) NOT NULL AUTO_INCREMENT,
  `USER_NO` varchar(32) DEFAULT NULL,
  `ACCOUNT_NO` varchar(32) NOT NULL,
  `USER_AGE` varchar(8) DEFAULT NULL,
  `USER_SEX` varchar(8) DEFAULT NULL,
  `USER_BIRTHDAY` datetime DEFAULT NULL,
  `USER_NAME` varchar(256) DEFAULT NULL,
  `DATA_OPER_TYPE` varchar(8) NOT NULL DEFAULT 'I',
  `DATA_OPER_TIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`USER_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=108 DEFAULT CHARSET=utf8;

/*Data for the table `p_user_info` */

insert  into `p_user_info`(`USER_ID`,`USER_NO`,`ACCOUNT_NO`,`USER_AGE`,`USER_SEX`,`USER_BIRTHDAY`,`USER_NAME`,`DATA_OPER_TYPE`,`DATA_OPER_TIME`) values (1,'10000000','admin','25','男','1993-10-04 15:14:47','彭鹏','I','2018-01-11 15:15:12'),(2,'10000001','','25','男','1993-01-02 00:00:00','pp','I','2018-01-11 16:07:44'),(6,'10000003','111',NULL,NULL,NULL,NULL,'I','2018-02-07 17:35:30'),(7,'10000004','q',NULL,NULL,NULL,NULL,'I','2018-02-07 17:41:35'),(8,'10000005','z',NULL,NULL,NULL,NULL,'I','2018-02-07 19:24:50'),(9,'1521443598269','游客1521443598269',NULL,NULL,NULL,'游客1521443598269','I','2018-03-19 15:13:18'),(10,'1521443622526','游客1521443622526',NULL,NULL,NULL,'游客1521443622526','I','2018-03-19 15:13:42'),(11,'1521443657625','游客1521443657625',NULL,NULL,NULL,'游客1521443657625','I','2018-03-19 15:14:17'),(12,'1521443701079','游客1521443701079',NULL,NULL,NULL,'游客1521443701079','I','2018-03-19 15:15:01'),(13,'1521443826765','游客1521443826765',NULL,NULL,NULL,'游客1521443826765','I','2018-03-19 15:17:06'),(14,'1521443942289','游客1521443942289',NULL,NULL,NULL,'游客1521443942289','I','2018-03-19 15:19:02'),(15,'1521443943032','游客1521443943032',NULL,NULL,NULL,'游客1521443943032','I','2018-03-19 15:19:03'),(16,'1521443943135','游客1521443943135',NULL,NULL,NULL,'游客1521443943135','I','2018-03-19 15:19:03'),(17,'1521444072111','游客1521444072111',NULL,NULL,NULL,'游客1521444072111','I','2018-03-19 15:21:12'),(18,'1521444072342','游客1521444072342',NULL,NULL,NULL,'游客1521444072342','I','2018-03-19 15:21:12'),(19,'1521444072983','游客1521444072983',NULL,NULL,NULL,'游客1521444072983','I','2018-03-19 15:21:12'),(20,'1521444077157','游客1521444077157',NULL,NULL,NULL,'游客1521444077157','I','2018-03-19 15:21:17'),(21,'1521444078950','游客1521444078950',NULL,NULL,NULL,'游客1521444078950','I','2018-03-19 15:21:18'),(22,'1521444081178','游客1521444081178',NULL,NULL,NULL,'游客1521444081178','I','2018-03-19 15:21:21'),(23,'1521444082422','游客1521444082422',NULL,NULL,NULL,'游客1521444082422','I','2018-03-19 15:21:22'),(24,'1521448903624','游客1521448903624',NULL,NULL,NULL,'游客1521448903624','I','2018-03-19 16:41:44'),(25,'1521448903862','游客1521448903862',NULL,NULL,NULL,'游客1521448903862','I','2018-03-19 16:41:44'),(26,'1521449048411','游客1521449048411',NULL,NULL,NULL,'游客1521449048411','I','2018-03-19 16:44:08'),(27,'1521449048524','游客1521449048524',NULL,NULL,NULL,'游客1521449048524','I','2018-03-19 16:44:08'),(28,'1521449049102','游客1521449049102',NULL,NULL,NULL,'游客1521449049102','I','2018-03-19 16:44:09'),(29,'1521449399254','游客1521449399254',NULL,NULL,NULL,'游客1521449399254','I','2018-03-19 16:49:59'),(30,'1521449399386','游客1521449399386',NULL,NULL,NULL,'游客1521449399386','I','2018-03-19 16:49:59'),(31,'1521449399788','游客1521449399788',NULL,NULL,NULL,'游客1521449399788','I','2018-03-19 16:49:59'),(32,'1521449422977','游客1521449422977',NULL,NULL,NULL,'游客1521449422977','I','2018-03-19 16:50:23'),(33,'1521449424418','游客1521449424418',NULL,NULL,NULL,'游客1521449424418','I','2018-03-19 16:50:24'),(34,'1521449514246','游客1521449514246',NULL,NULL,NULL,'游客1521449514246','I','2018-03-19 16:51:54'),(35,'1521449515104','游客1521449515104',NULL,NULL,NULL,'游客1521449515104','I','2018-03-19 16:51:55'),(36,'1521449768921','游客1521449768921',NULL,NULL,NULL,'游客1521449768921','I','2018-03-19 16:56:08'),(37,'1521449769072','游客1521449769072',NULL,NULL,NULL,'游客1521449769072','I','2018-03-19 16:56:09'),(38,'1521449769435','游客1521449769435',NULL,NULL,NULL,'游客1521449769435','I','2018-03-19 16:56:09'),(39,'1521449799163','游客1521449799163',NULL,NULL,NULL,'游客1521449799163','I','2018-03-19 16:56:39'),(40,'1521449799311','游客1521449799311',NULL,NULL,NULL,'游客1521449799311','I','2018-03-19 16:56:39'),(41,'1521449799708','游客1521449799708',NULL,NULL,NULL,'游客1521449799708','I','2018-03-19 16:56:39'),(42,'1521449891871','游客1521449891871',NULL,NULL,NULL,'游客1521449891871','I','2018-03-19 16:58:11'),(43,'1521449892013','游客1521449892013',NULL,NULL,NULL,'游客1521449892013','I','2018-03-19 16:58:12'),(44,'1521449892487','游客1521449892487',NULL,NULL,NULL,'游客1521449892487','I','2018-03-19 16:58:12'),(45,'1521450183912','游客1521450183912',NULL,NULL,NULL,'游客1521450183912','I','2018-03-19 17:03:03'),(46,'1521450184028','游客1521450184028',NULL,NULL,NULL,'游客1521450184028','I','2018-03-19 17:03:04'),(47,'1521450184566','游客1521450184566',NULL,NULL,NULL,'游客1521450184566','I','2018-03-19 17:03:04'),(48,'1521450323762','游客1521450323762',NULL,NULL,NULL,'游客1521450323762','I','2018-03-19 17:05:23'),(49,'1521450323867','游客1521450323867',NULL,NULL,NULL,'游客1521450323867','I','2018-03-19 17:05:23'),(50,'1521450324280','游客1521450324280',NULL,NULL,NULL,'游客1521450324280','I','2018-03-19 17:05:24'),(51,'1521450354066','游客1521450354066',NULL,NULL,NULL,'游客1521450354066','I','2018-03-19 17:05:54'),(52,'1521450354237','游客1521450354237',NULL,NULL,NULL,'游客1521450354237','I','2018-03-19 17:05:54'),(53,'1521450354846','游客1521450354846',NULL,NULL,NULL,'游客1521450354846','I','2018-03-19 17:05:54'),(54,'1521450419987','游客1521450419987',NULL,NULL,NULL,'游客1521450419987','I','2018-03-19 17:07:00'),(55,'1521450420352','游客1521450420352',NULL,NULL,NULL,'游客1521450420352','I','2018-03-19 17:07:00'),(56,'1521450420820','游客1521450420820',NULL,NULL,NULL,'游客1521450420820','I','2018-03-19 17:07:00'),(57,'1521450453553','游客1521450453553',NULL,NULL,NULL,'游客1521450453553','I','2018-03-19 17:07:33'),(58,'1521450453703','游客1521450453703',NULL,NULL,NULL,'游客1521450453703','I','2018-03-19 17:07:33'),(59,'1521450454225','游客1521450454225',NULL,NULL,NULL,'游客1521450454225','I','2018-03-19 17:07:34'),(60,'1521450461501','游客1521450461501',NULL,NULL,NULL,'游客1521450461501','I','2018-03-19 17:07:41'),(61,'1521450461589','游客1521450461589',NULL,NULL,NULL,'游客1521450461589','I','2018-03-19 17:07:41'),(62,'1521450462219','游客1521450462219',NULL,NULL,NULL,'游客1521450462219','I','2018-03-19 17:07:42'),(63,'1521450471687','游客1521450471687',NULL,NULL,NULL,'游客1521450471687','I','2018-03-19 17:07:51'),(64,'1521450471844','游客1521450471844',NULL,NULL,NULL,'游客1521450471844','I','2018-03-19 17:07:51'),(65,'1521450472339','游客1521450472339',NULL,NULL,NULL,'游客1521450472339','I','2018-03-19 17:07:52'),(66,'1521450532326','游客1521450532326',NULL,NULL,NULL,'游客1521450532326','I','2018-03-19 17:08:52'),(67,'1521450532491','游客1521450532491',NULL,NULL,NULL,'游客1521450532491','I','2018-03-19 17:08:52'),(68,'1521450532939','游客1521450532939',NULL,NULL,NULL,'游客1521450532939','I','2018-03-19 17:08:52'),(69,'1521450542673','游客1521450542673',NULL,NULL,NULL,'游客1521450542673','I','2018-03-19 17:09:02'),(70,'1521450542833','游客1521450542833',NULL,NULL,NULL,'游客1521450542833','I','2018-03-19 17:09:02'),(71,'1521450543302','游客1521450543302',NULL,NULL,NULL,'游客1521450543302','I','2018-03-19 17:09:03'),(72,'1521450719697','游客1521450719697',NULL,NULL,NULL,'游客1521450719697','I','2018-03-19 17:11:59'),(73,'1521450719866','游客1521450719866',NULL,NULL,NULL,'游客1521450719866','I','2018-03-19 17:11:59'),(74,'1521450720237','游客1521450720237',NULL,NULL,NULL,'游客1521450720237','I','2018-03-19 17:12:00'),(75,'1521450838114','游客1521450838114',NULL,NULL,NULL,'游客1521450838114','I','2018-03-19 17:13:58'),(76,'1521450838283','游客1521450838283',NULL,NULL,NULL,'游客1521450838283','I','2018-03-19 17:13:58'),(77,'1521450838759','游客1521450838759',NULL,NULL,NULL,'游客1521450838759','I','2018-03-19 17:13:58'),(78,'1521451133009','游客1521451133009',NULL,NULL,NULL,'游客1521451133009','I','2018-03-19 17:18:53'),(79,'1521451133148','游客1521451133148',NULL,NULL,NULL,'游客1521451133148','I','2018-03-19 17:18:53'),(80,'1521451133559','游客1521451133559',NULL,NULL,NULL,'游客1521451133559','I','2018-03-19 17:18:53'),(81,'1521451194464','游客1521451194464',NULL,NULL,NULL,'游客1521451194464','I','2018-03-19 17:19:54'),(82,'1521451194570','游客1521451194570',NULL,NULL,NULL,'游客1521451194570','I','2018-03-19 17:19:54'),(83,'1521451195207','游客1521451195207',NULL,NULL,NULL,'游客1521451195207','I','2018-03-19 17:19:55'),(84,'1521451733204','游客1521451733204',NULL,NULL,NULL,'游客1521451733204','I','2018-03-19 17:28:53'),(85,'1521451733814','游客1521451733814',NULL,NULL,NULL,'游客1521451733814','I','2018-03-19 17:28:53'),(86,'1521451733890','游客1521451733890',NULL,NULL,NULL,'游客1521451733890','I','2018-03-19 17:28:53'),(87,'1521451742103','游客1521451742103',NULL,NULL,NULL,'游客1521451742103','I','2018-03-19 17:29:02'),(88,'1521451742267','游客1521451742267',NULL,NULL,NULL,'游客1521451742267','I','2018-03-19 17:29:02'),(89,'1521451742767','游客1521451742767',NULL,NULL,NULL,'游客1521451742767','I','2018-03-19 17:29:02'),(90,'1521451811902','游客1521451811902',NULL,NULL,NULL,'游客1521451811902','I','2018-03-19 17:30:11'),(91,'1521451812003','游客1521451812003',NULL,NULL,NULL,'游客1521451812003','I','2018-03-19 17:30:12'),(92,'1521451812462','游客1521451812462',NULL,NULL,NULL,'游客1521451812462','I','2018-03-19 17:30:12'),(93,'1521453046759','游客1521453046759',NULL,NULL,NULL,'游客1521453046759','I','2018-03-19 17:50:46'),(94,'1521453047304','游客1521453047304',NULL,NULL,NULL,'游客1521453047304','I','2018-03-19 17:50:47'),(95,'1521453133010','游客1521453133010',NULL,NULL,NULL,'游客1521453133010','I','2018-03-19 17:52:13'),(96,'1521453133554','游客1521453133554',NULL,NULL,NULL,'游客1521453133554','I','2018-03-19 17:52:13'),(97,'1521453210915','游客1521453210915',NULL,NULL,NULL,'游客1521453210915','I','2018-03-19 17:53:31'),(98,'1521453211743','游客1521453211743',NULL,NULL,NULL,'游客1521453211743','I','2018-03-19 17:53:31'),(99,'1521453234259','游客1521453234259',NULL,NULL,NULL,'游客1521453234259','I','2018-03-19 17:53:54'),(100,'1521453234497','游客1521453234497',NULL,NULL,NULL,'游客1521453234497','I','2018-03-19 17:53:54'),(101,'1521453234959','游客1521453234959',NULL,NULL,NULL,'游客1521453234959','I','2018-03-19 17:53:54'),(102,'1521453387472','游客1521453387472',NULL,NULL,NULL,'游客1521453387472','I','2018-03-19 17:56:27'),(103,'1521453387609','游客1521453387609',NULL,NULL,NULL,'游客1521453387609','I','2018-03-19 17:56:27'),(104,'1521453387947','游客1521453387947',NULL,NULL,NULL,'游客1521453387947','I','2018-03-19 17:56:27'),(105,'1521453520098','游客1521453520098',NULL,NULL,NULL,'游客1521453520098','I','2018-03-19 17:58:40'),(106,'1521453520251','游客1521453520251',NULL,NULL,NULL,'游客1521453520251','I','2018-03-19 17:58:40'),(107,'1521453520531','游客1521453520531',NULL,NULL,NULL,'游客1521453520531','I','2018-03-19 17:58:40');

/*Table structure for table `sequence` */

DROP TABLE IF EXISTS `sequence`;

CREATE TABLE `sequence` (
  `name` varchar(50) NOT NULL,
  `current_value` int(11) NOT NULL,
  `increment` int(11) NOT NULL DEFAULT '1',
  PRIMARY KEY (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `sequence` */

insert  into `sequence`(`name`,`current_value`,`increment`) values ('userNoSeq',10000005,1);

/*Table structure for table `t_areainfo` */

DROP TABLE IF EXISTS `t_areainfo`;

CREATE TABLE `t_areainfo` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `level` int(11) DEFAULT '0',
  `name` varchar(255) DEFAULT '0',
  `parentId` int(11) DEFAULT '0',
  `status` int(11) DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=65 DEFAULT CHARSET=utf8;

/*Data for the table `t_areainfo` */

insert  into `t_areainfo`(`id`,`level`,`name`,`parentId`,`status`) values (1,0,'中国',0,0),(2,0,'华北区',1,0),(3,0,'华南区',1,0),(4,0,'北京',2,0),(5,0,'海淀区',4,0),(6,0,'丰台区',4,0),(7,0,'朝阳区',4,0),(8,0,'北京XX区1',4,0),(9,0,'北京XX区2',4,0),(10,0,'北京XX区3',4,0),(11,0,'北京XX区4',4,0),(12,0,'北京XX区5',4,0),(13,0,'北京XX区6',4,0),(14,0,'北京XX区7',4,0),(15,0,'北京XX区8',4,0),(16,0,'北京XX区9',4,0),(17,0,'北京XX区10',4,0),(18,0,'北京XX区11',4,0),(19,0,'北京XX区12',4,0),(20,0,'北京XX区13',4,0),(21,0,'北京XX区14',4,0),(22,0,'北京XX区15',4,0),(23,0,'北京XX区16',4,0),(24,0,'北京XX区17',4,0),(25,0,'北京XX区18',4,0),(26,0,'北京XX区19',4,0),(27,0,'北京XX区1',4,0),(28,0,'北京XX区2',4,0),(29,0,'北京XX区3',4,0),(30,0,'北京XX区4',4,0),(31,0,'北京XX区5',4,0),(32,0,'北京XX区6',4,0),(33,0,'北京XX区7',4,0),(34,0,'北京XX区8',4,0),(35,0,'北京XX区9',4,0),(36,0,'北京XX区10',4,0),(37,0,'北京XX区11',4,0),(38,0,'北京XX区12',4,0),(39,0,'北京XX区13',4,0),(40,0,'北京XX区14',4,0),(41,0,'北京XX区15',4,0),(42,0,'北京XX区16',4,0),(43,0,'北京XX区17',4,0),(44,0,'北京XX区18',4,0),(45,0,'北京XX区19',4,0),(46,0,'xx省1',1,0),(47,0,'xx省2',1,0),(48,0,'xx省3',1,0),(49,0,'xx省4',1,0),(50,0,'xx省5',1,0),(51,0,'xx省6',1,0),(52,0,'xx省7',1,0),(53,0,'xx省8',1,0),(54,0,'xx省9',1,0),(55,0,'xx省10',1,0),(56,0,'xx省11',1,0),(57,0,'xx省12',1,0),(58,0,'xx省13',1,0),(59,0,'xx省14',1,0),(60,0,'xx省15',1,0),(61,0,'xx省16',1,0),(62,0,'xx省17',1,0),(63,0,'xx省18',1,0),(64,0,'xx省19',1,0);

/* Function  structure for function  `currval` */

/*!50003 DROP FUNCTION IF EXISTS `currval` */;
DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`localhost` FUNCTION `currval`(seq_name VARCHAR(50)) RETURNS int(11)
    DETERMINISTIC
BEGIN
     DECLARE value INTEGER; 
     SET value = 0; 
     SELECT current_value INTO value 
          FROM sequence
          WHERE name = seq_name; 
     RETURN value; 
END */$$
DELIMITER ;

/* Function  structure for function  `nextval` */

/*!50003 DROP FUNCTION IF EXISTS `nextval` */;
DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`localhost` FUNCTION `nextval`(seq_name VARCHAR(50)) RETURNS int(11)
    DETERMINISTIC
BEGIN
     UPDATE sequence
          SET current_value = current_value + increment 
          WHERE name = seq_name; 
     RETURN currval(seq_name); 
END */$$
DELIMITER ;

/* Function  structure for function  `PKG_BLOG_LOGIN_GETACCOUNTNO` */

/*!50003 DROP FUNCTION IF EXISTS `PKG_BLOG_LOGIN_GETACCOUNTNO` */;
DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`localhost` FUNCTION `PKG_BLOG_LOGIN_GETACCOUNTNO`(IN_ACCOUNT_NO varchar(32)) RETURNS varchar(32) CHARSET utf8
BEGIN
	DECLARE V_ACCOUNT_NO_1 VARCHAR(32) DEFAULT '';
	DECLARE V_ACCOUNT_NO_2 VARCHAR(32) DEFAULT '';
	DECLARE V_ACCOUNT_NO_3 VARCHAR(32) DEFAULT '';
	declare OUT_ACCOUNT_NO	VARCHAR(32);
	SELECT ACCOUNT_NO INTO V_ACCOUNT_NO_1 FROM P_ACCOUNT WHERE ACCOUNT_NO = IN_ACCOUNT_NO;
	SELECT ACCOUNT_NO INTO V_ACCOUNT_NO_2 FROM P_ACCOUNT WHERE ACCOUNT_PHONE = IN_ACCOUNT_NO;
	SELECT ACCOUNT_NO INTO V_ACCOUNT_NO_3 FROM P_ACCOUNT WHERE ACCOUNT_EMAIL = IN_ACCOUNT_NO;
	
	IF V_ACCOUNT_NO_3 != '' THEN
	  SET OUT_ACCOUNT_NO = V_ACCOUNT_NO_3;
	ELSE IF  V_ACCOUNT_NO_2 != '' THEN
	  SET OUT_ACCOUNT_NO =  V_ACCOUNT_NO_2;
	ELSE IF V_ACCOUNT_NO_1 != '' THEN
	  SET OUT_ACCOUNT_NO =  V_ACCOUNT_NO_1;
	ELSE
	  SET OUT_ACCOUNT_NO = IN_ACCOUNT_NO;
	END IF;
	END IF;
	END IF;
	RETURN OUT_ACCOUNT_NO;
    END */$$
DELIMITER ;

/* Function  structure for function  `PKG_TO_DOWN` */

/*!50003 DROP FUNCTION IF EXISTS `PKG_TO_DOWN` */;
DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`localhost` FUNCTION `PKG_TO_DOWN`(areaId varchar(4000)) RETURNS varchar(4000) CHARSET utf8
BEGIN
  DECLARE sTemp VARCHAR (4000) ;
  DECLARE sTempChd VARCHAR (4000) ;
  SET sTemp = '$' ;
  SET sTempChd = areaId ;
  WHILE
    sTempChd IS NOT NULL DO SET sTemp = CONCAT(sTemp, ',', sTempChd) ;
    SELECT 
      GROUP_CONCAT(TYPE_NO) INTO sTempChd 
    FROM
      p_note_type 
    WHERE FIND_IN_SET(P_TYPE_NO, sTempChd) > 0 ;
  END WHILE ;
  RETURN sTemp ;
END */$$
DELIMITER ;

/* Function  structure for function  `PKG_TO_UP` */

/*!50003 DROP FUNCTION IF EXISTS `PKG_TO_UP` */;
DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`localhost` FUNCTION `PKG_TO_UP`(noteType varchar(4000)) RETURNS varchar(4000) CHARSET utf8
BEGIN
DECLARE sTemp VARCHAR(4000);
DECLARE sTempChd VARCHAR(4000);
SET sTemp='$';
SET sTempChd = noteType;
SET sTemp = CONCAT(sTemp,',',sTempChd);
SELECT p_type_no INTO sTempChd FROM p_note_type WHERE type_no= sTempChd;
WHILE sTempChd <> 0 DO
SET sTemp = CONCAT(sTemp,',',sTempChd);
SELECT p_type_no INTO sTempChd FROM p_note_type WHERE type_no = sTempChd;
END WHILE;
RETURN sTemp;
END */$$
DELIMITER ;

/* Function  structure for function  `setval` */

/*!50003 DROP FUNCTION IF EXISTS `setval` */;
DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`localhost` FUNCTION `setval`(seq_name VARCHAR(50), value INTEGER) RETURNS int(11)
    DETERMINISTIC
BEGIN
     UPDATE sequence
          SET current_value = value 
          WHERE name = seq_name; 
     RETURN currval(seq_name); 
END */$$
DELIMITER ;

/* Procedure structure for procedure `PKG_BLOG_REGISTER` */

/*!50003 DROP PROCEDURE IF EXISTS  `PKG_BLOG_REGISTER` */;

DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`localhost` PROCEDURE `PKG_BLOG_REGISTER`(
  IN IN_ACCOUNT_NO VARCHAR (32),
  IN IN_ACCOUNT_NAME VARCHAR(32),
  IN IN_ACCOUNT_PWD VARCHAR (32),
  IN IN_ACCOUNT_PHONE VARCHAR (32),
  IN IN_ACCOUNT_EMAIL VARCHAR (32),
  OUT OUT_CODE INTEGER,
  OUT OUT_MSG VARCHAR (256)
)
BEGIN
  declare V_SQL_ERROR_BEGIN VARCHAR(2000) DEFAULT '';
  declare V_SQL_ERROR_END VARCHAR(2000) DEFAULT '';
  
  DECLARE V_ACCOUNT_NUM INTEGER ;
  SELECT 
    COUNT(1) INTO V_ACCOUNT_NUM 
  FROM
    blog.p_account t 
  WHERE t.account_no = IN_ACCOUNT_NO ;
  IF V_ACCOUNT_NUM = 1 
  THEN SET OUT_CODE = - 1 ;
  SET OUT_MSG = '该账户已存在' ;
  ELSE 
  INSERT INTO blog.p_account (
    ACCOUNT_NO,
    ACCOUNT_NAME,
    ACCOUNT_PWD,
    ACCOUNT_PHONE,
    ACCOUNT_EMAIL,
    ACCOUNT_ROLE
  ) 
  VALUES
    (
      IN_ACCOUNT_NO,
      IN_ACCOUNT_NAME,
      IN_ACCOUNT_PWD,
      IN_ACCOUNT_PHONE,
      IN_ACCOUNT_EMAIL,
      '0'
    ) ;
  SET OUT_CODE = 1 ;
  SET OUT_MSG = "注册成功" ;
  INSERT INTO blog.p_user_info (account_no,user_no) VALUE (in_account_no,nextval('userNoSeq')) ;
  COMMIT;
  END IF ;
  
  #DECLARE CONTINUE HANDLER FOR SQLEXCEPTION
  #   begin
  #  GET DIAGNOSTICS CONDITION 1 
  #  V_SQL_ERROR_BEGIN = RETURNED_SQLSTATE,V_SQL_ERROR_END = MESSAGE_TEXT;
  #  INSERT INTO p_sql_error(ERROR_MSG) VALUE(CONCAT(V_SQL_ERROR_BEGIN,':',MESSAGE_TEXT));
  #  SET OUT_CODE = -1;
  #  SET OUT_MSG  = CONCAT(V_SQL_ERROR_BEGIN,':',MESSAGE_TEXT);
  #END ;
  
END */$$
DELIMITER ;

/* Procedure structure for procedure `test` */

/*!50003 DROP PROCEDURE IF EXISTS  `test` */;

DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`localhost` PROCEDURE `test`(IN type int)
BEGIN
    #Routine body goes here...
    DECLARE c varchar(500);
    IF type = 0 THEN
        set c = 'param is 0';
    ELSEIF type = 1 THEN
        set c = 'param is 1';
    ELSE
        set c = 'param is others, not 0 or 1';
    END IF;
    select c;
END */$$
DELIMITER ;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
